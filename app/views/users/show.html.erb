<div class="school-box large-12 medium-12 columns" >
  <!-- user info box -->
  <div class=" large-4  medium-6 columns">
    <div class="callout user-info">
      <p class="user_name">Hello <%= current_user.first_name %></p>
      <% school = @schools %>

      <%= form_for current_user, html: { multipart: true } do |f| %>
        <p>
        <%= image_tag(current_user.profile_photo) if current_user.profile_photo? %>
        <% if current_user.profile_photo? %>
        <% else %>
          <label>Upload Picture</label>
          <%= f.file_field :profile_photo %>
          <div class="actions">
            <%= f.submit "Upload Picture" %>
          </div>
          <% end %>
        </p>
      <% end %>
    </div>
  </div>
  <!-- parent Information box -->
  <% if !current_user.teacher && current_user.role != "admin" %>
    <div class="large-8 medium-7 columns">
      <div class="callout">
        <h3>Search for School to find your child teacher</h3>
        <% user_id = current_user.id %>
        <%= form_for @token, html: { class: ''} do |f| %>
          <% if @token.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(@token.errors.count, "error") %> prohibited this token from being saved:</h2>
              <ul>
                <% @token.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>
          <%= f.label :token, 'Token' %>
          <%= f.text_field :token %>

          <%= f.hidden_field :user_id, value: user_id %>

          <%= f.label :student_id, 'Enter Student ID' %>
          <%= f.text_field :student_id %>

          <%= f.submit "Submit", class: 'button submit-button' %>
        <% end %>
        <%= link_to 'Search School', user_schools_path(current_user) %>
      </div>
      <div class="callout">
        <% if current_user.tokens %>
          <% current_user.tokens.each do |t| %>
            <!-- Student information array  -->
            <% if t.student != nil%>
              <% teacher = User.where(id: t.student.user_id) %>
              <div class="callout student-box">
                <h3>Teacher Name: <%= teacher[0].full_name %></h3><br>
                <ul>
                  <li>Student Name: <%= t.student.full_name %></li><br>
                  <li>Grade: <%= t.student.grade %></li><br>
                  <li>Last Upgrate: <%= t.student.updated_at.strftime("%m/%d/%Y") %> </li><br>
                  <%= image_tag(t.student.profile_photo) %><br><br>
                  <li>Token: <%= t.token %></li><br>
                  <li>Id: <%= t.student.id %> </li>
                  <%= link_to 'Delete Token', t, method: :delete, data: { confirm: 'Are you sure?' } %><br>
                </ul>
                <h4>Teacher General Comments:</h4>
                <% t.student.classroom.comments.each do |c| %>
                  <div class="callout">
                    <p><%= c.comment %></p><br>
                    <p>Posted Date: <%= c.created_at.strftime("%m/%d/%Y") %> </p>

                  </div>
                <% end %>
              </div>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- teacher school form and school info box -->
  <% if current_user.admin? || current_user.teacher? %>
    <div class="large-4 medium-6 small-12 columns">
      <div class="callout">

        <p>In this page you would see an add school form,
          in that form you can add your school, when finish press the
          school bus </p>
      </div>
      <!-- School list -->
      <% if @schools.length >= 1 %>
        <div class="callout school-list">

          <% @schools.each do |school| %>
          <div class="callout">
            <h4>School info:</h4>
            <p class="school-info"><%= school.name %></p>
            <p class="school-info"><%= school.address %></p>
            <p class="school-info"> <%= school.city %>, <%= school.state %> <%= school.zip_code %></p>
            <p class="school-info"><%= link_to 'Delete School', school, method: :delete, data: { confirm: 'Are you sure?' } %></p>
            <p class="school-info"><%= link_to 'Add Classrooms', user_school_classrooms_path(current_user, school) %> </p>
          </div>
          <% end %>
        </div>
      <% end %>
    </div>
    <!-- Add school form -->
    <% user_id = @user.id %>
    <div class="small-12 large-4 medium-6 columns form">
      <div class="translucent-form-overlay">

        <%= form_for @school, html: { class: ''} do |f| %>

          <% if @school.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@school.errors.count, "error") %> prohibited this school from being saved:</h2>
            <ul>
              <% @school.errors.full_messages.each do |message| %>
              <li><%= message %></li>
              <% end %>
            </ul>
          </div>
          <% end %>
          <div class="large-12 columns">
            <%= f.label :name, 'School Name' %><br/>
            <%= f.text_field :name, required: true, autofocus: true %></br>
          </div>
          <div class="large-12 columns">
            <%= f.label :address, 'School Address' %><br/>
            <%= f.text_field :address, required: true, autofocus: true %></br>
          </div>
          <div class="large-12 columns">
            <%= f.label :city, 'School City' %><br/>
            <%= f.text_field :city, autofocus: true %>
          </div>
          <div class="large-6 medium-6 columns">
            <%= f.label :state, 'School State' %><br/>
            <%= f.select(:state, options_for_select([
              ['-', '-'],
              ['Alaska', 'AK'],
              ['Alabama', 'AL'],
              ['Arkansas', 'AR'],
              ['American Samoa', 'AS'],
              ['California', 'CA'],
              ['Colorado', 'CO'],
              ['Connecticut', 'CT'],
              ['District of Columbia', 'DC'],
              ['Delaware', 'DE'],
              ['Florida', 'FL'],
              ['Georgia', 'GA'],
              ['Hawaii', 'HI'],
              ['Iowa', 'IA'],
              ['Idaho', 'ID'],
              ['Illinois', 'IL'],
              ['Kansas', 'KS'],
              ['Kentucky', 'KY'],
              ['Louisiana', 'LA'],
              ['Massachusetts', 'MA'],
              ['Maryland', 'MD'],
              ['Maine', 'ME'],
              ['Michigan', 'MI'],
              ['Minnesota', 'MN'],
              ['Missouri', 'MO'],
              ['Mississippi', 'MS'],
              ['Montana', 'MT'],
              ['North Carolina', 'NC'],
              ['North Dakota', 'ND'],
              ['Nebraska', 'NE'],
              ['New Hampshire', 'NH'],
              ['New Jersey', 'NJ'],
              ['New Mexico', 'NM'],
              ['Nevada', 'NV'],
              ['New York', 'NY'],
              ['Ohio', 'OH'],
              ['Oklahoma', 'OK'],
              ['Oregon', 'OR'],
              ['Pennsylvania', 'PA'],
              ['Puerto Rico', 'PR'],
              ['Rhode Island', 'RI'],
              ['South Carolina', 'SC'],
              ['South Dakota', 'SD'],
              ['Tennessee', 'TN'],
              ['Texas', 'TX'],
              ['Utah', 'UT'],
              ['Virginia', 'VA'],
              ['Virgin Islands', 'VI'],
              ['Vermont', 'VT'],
              ['Washington', 'WA'],
              ['Wisconsin', 'WI'],
              ['West Virginia', 'WV'],
              ['Wyoming', 'WY'],

              ])) %>

          </div>
          <div class="large-6 medium-6 columns">
            <%= f.label :zip_code %><br/>
            <%= f.text_field :zip_code, autofocus: true %>
          </div>

          <%= f.hidden_field :user_id, value: user_id %>

          <%= f.submit "Submit", class: 'button submit-button' %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
